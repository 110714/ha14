!function(){var e={includes:{},globals:{},delimiter:">",compact:!1,_copy:function(e,t){t=t||[];for(var i in e)t[i]=e[i];return t},_size:function(e){return e instanceof Array?e.length:e||0},_iter:function(e,t){this.idx=e,this.size=t,this.length=t,this.sign="#",this.toString=function(){return this.idx+this.sign.length-1}},_pipe:function(t,i){var n,r,s,o;if(n=i.shift()){r=n.split(this.delimiter),s=r.shift().trim();try{o=e.pipes[s].apply(null,[t].concat(r)),t=this._pipe(o,i)}catch(a){}}return t},_eval:function(t,i,n){var r,s,o=this._pipe(t,i),a=o,c=-1;if(o instanceof Array)for(o="",r=a.length;++c<r;)s={iter:new this._iter(c,r)},o+=n?e.up(n,a[c],s):a[c];else o instanceof Object&&(o=e.up(n,a));return o},_test:function(t,i,n,r){var s=e.up(i,n,r).split(/\{\{\s*else\s*\}\}/);return(t===!1?s[1]:s[0])||""},_bridge:function(e,t){t="."==t?"\\.":t.replace(/\$/g,"\\$");var i,n,r="{{\\s*"+t+"([^/}]+\\w*)?}}|{{/"+t+"\\s*}}",s=new RegExp(r,"g"),o=e.match(s)||[],a=0,c=0,l=-1,u=0;for(n=0;n<o.length&&(i=n,l=e.indexOf(o[i],l+1),o[i].indexOf("{{/")>-1?c++:a++,a!==c);n++);return a=e.indexOf(o[0]),c=a+o[0].length,u=l+o[i].length,[e.substring(a,u),e.substring(c,l)]}};e.up=function(t,i,n){i=i||{},n=n||{};var r,s,o,a,c,l,u,d,f,h,p=/\{\{(.+?)\}\}/g,m=t.match(p)||[],v=[],_=0,g=0;for(n.pipes&&this._copy(n.pipes,this.pipes),n.includes&&this._copy(n.includes,this.includes),n.globals&&this._copy(n.globals,this.globals),n.delimiter&&(this.delimiter=n.delimiter),void 0!==n.compact&&(this.compact=n.compact);r=m[_++];)if(u=void 0,l="",a=r.indexOf("/}}")>-1,s=r.substr(2,r.length-(a?5:4)),s=s.replace(/`(.+?)`/g,function(t,n){return e.up("{{"+n+"}}",i)}),c=0===s.trim().indexOf("if "),v=s.split("|"),v.shift(),s=s.replace(/^\s*if/,"").split("|").shift().trim(),o=c?"if":s.split("|")[0],h=i[s],c&&!v.length&&(v=["notempty"]),!a&&t.indexOf("{{/"+o)>-1&&(u=this._bridge(t,o),r=u[0],l=u[1],_+=r.match(p).length-1),!/^\{\{\s*else\s*\}\}$/.test(r)){if(void 0!==(d=this.globals[s]))u=this._eval(d,v,l);else if(f=this.includes[s])f instanceof Function&&(f=f()),u=this._pipe(e.up(f,i,n),v);else if(s.indexOf("#")>-1)n.iter.sign=s,u=this._pipe(n.iter,v);else if("."===s)u=this._pipe(i,v);else if(s.indexOf(".")>-1){for(s=s.split("."),h=e.globals[s[0]],h?g=1:(g=0,h=i);h&&g<s.length;)h=h[s[g++]];u=this._eval(h,v,l)}else c?u=this._pipe(h,v):h instanceof Array?u=this._eval(h,v,l):l?u=h?e.up(l,h):void 0:i.hasOwnProperty(s)&&(u=this._pipe(h,v));u instanceof Array&&(u=this._eval(u,v,l)),c&&(u=this._test(u,l,i,n)),t=t.replace(r,void 0===u?"???":u)}return this.compact?t.replace(/>\s+</g,"><"):t},e.pipes={empty:function(e){return e&&0!==(e+"").trim().length?!1:e},notempty:function(e){return e&&(e+"").trim().length?e:!1},blank:function(e,t){return e||0===e?e:t},more:function(t,i){return e._size(t)>i?t:!1},less:function(t,i){return e._size(t)<i?t:!1},ormore:function(t,i){return e._size(t)>=i?t:!1},orless:function(t,i){return e._size(t)<=i?t:!1},between:function(t,i,n){return t=e._size(t),t>=i&&n>=t?t:!1},equals:function(e,t){return e==t?e:!1},notequals:function(e,t){return e!=t?e:!1},like:function(e,t){return new RegExp(t,"i").test(e)?e:!1},notlike:function(t,i){return e.pipes.like(t,i)?!1:t},upcase:function(e){return String(e).toUpperCase()},downcase:function(e){return String(e).toLowerCase()},capcase:function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},chop:function(e,t){return e.length>t?e.substr(0,t)+"...":e},tease:function(e,t){var i=e.split(/\s+/);return i.slice(0,t).join(" ")+(i.length>t?"...":"")},trim:function(e){return e.trim()},pack:function(e){return e.trim().replace(/\s{2,}/g," ")},round:function(e){return Math.round(+e)},clean:function(e){return String(e).replace(/<\/?[^>]+>/gi,"")},size:function(e){return e.length},length:function(e){return e.length},reverse:function(e){return[].concat(e).reverse()},join:function(e,t){return e.join(t)},limit:function(e,t,i){return e.slice(+i||0,+t+(+i||0))},split:function(e,t){return e.split(t||",")},choose:function(e,t,i){return e?t:i||""},toggle:function(e,t,i,n){return i.split(",")[t.match(/\w+/g).indexOf(e+"")]||n},sort:function(e,t){var i=function(e,i){return e[t]>i[t]?1:-1};return[].concat(e).sort(t?i:void 0)},fix:function(e,t){return(+e).toFixed(t)},mod:function(e,t){return+e%+t},divisible:function(e,t){return e&&0===+e%t?e:!1},even:function(e){return e&&0===(1&+e)?e:!1},odd:function(e){return e&&1===(1&+e)?e:!1},number:function(e){return parseFloat(e.replace(/[^\-\d\.]/g,""))},url:function(e){return encodeURI(e)},bool:function(e){return!!e},falsy:function(e){return!e},first:function(e){return 0===e.idx},last:function(e){return e.idx===e.size-1},call:function(e,t){return e[t].apply(e,[].slice.call(arguments,2))},set:function(t,i){return e.globals[i]=t,""},log:function(e){return console.log(e),e}},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd&&define(function(){return e});var t=null,i=5e3,n=function(e){var t=new XMLHttpRequest,n=e.cache?e.url+"?"+(new Date).getTime():e.url,r=setTimeout(function(){t.abort(),e.error&&e.error(),e.complete&&e.complete()},i);t.open(e.type,n),t.onreadystatechange=function(){4===t.readyState&&(clearTimeout(r),200===t.status||0===t.status?(e.success&&e.success(t.responseText),e.complete&&e.complete()):(e.error&&e.error(t.responseText),e.complete&&e.complete()))},e.beforeSend&&e.beforeSend(t),t.send()},r=function(e){n({type:"get",url:e.url,beforeSend:function(e){e.setRequestHeader("Accept","application/json, text/javascript")},success:function(t){e.success&&e.success(JSON.parse(t))},error:e.error,complete:e.complete,cache:!1})};this._fi=function(e){var t,n=/^.*((facebook\.com\/)(.*)((video|photo|story)\.php|embed))\?(v=|video_id=|story_fbid=|.*&story_fbid=|.*&v=|.*&video_id=)(\d+).*/,r=/^.*(facebook\.com\/)(.*)\/(\d+).*/;return t=(i=e.match(n)&&i[7])?i[7]:(i=e.match(r)&&i[3])?i[3]:!1},this._fs=function(e){var t=new Date(0,0,0);return t.setSeconds(+e),(t.getHours()?t.getHours()+":":"")+t.getMinutes()+":"+t.getSeconds()},this._ct=function(e){var t,i=new Date(1e3*e),n=i.getFullYear(),r=("0"+(i.getMonth()+1)).slice(-2),s=("0"+i.getDate()).slice(-2),o=i.getHours(),a=o,c=("0"+i.getMinutes()).slice(-2),l="AM";return o>12?(a=o-12,l="PM"):12===o?(a=12,l="PM"):0==o&&(a=12),t=n+"-"+r+"-"+s+", "+a+":"+c+" "+l},this.extend=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var i in arguments[t])arguments[t].hasOwnProperty(i)&&(e[i]=arguments[t][i]);return e},this._u=function(e){if(!e)return"";var t=e.length;if(void 0==t)return e.checked?e.value:"";for(var i=0;t>i;i++)if(e[i].checked)return e[i].value;return""},this.setCheckedValue=function(e,t){if(e){var i=e.length;if(void 0==i)return void(e.checked=e.value==t.toString());for(var n=0;i>n;n++)e[n].checked=!1,e[n].value==t.toString()&&(e[n].checked=!0)}},this._f=function(e,t){var i=_i("_vs"),n=i.parentNode,r="has-"+t;i.innerHTML=e,n.className=n.className.replace(/\b(has-\w+)\b/g,"").trim(),n.className+=" "+r},this._gfv=function(i){var n=_fi(i);if(n!==t){if(!n)return void _f("Error!!!","error");var s='<div class="row"><div class="col-md-6">{{if title|notempty}}<h3>{{title}}</h3>{{/if}}<div class="download_link">{{if src|notempty}}<a class="btn btn-default" target="_blank" href="{{src}}" role="button"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> Download SD (360p)</a>{{/if}}{{if src_hq|notempty}}<a class="btn btn-info" target="_blank" href="{{src_hq}}" role="button"><span class="glyphicon glyphicon-save" aria-hidden="true"></span> Download HD (720p/960p/1080p)</a>{{/if}}<p class="dl_g"><small>(Right click the download link button and choose "Save link as...")</small></p></div><p>Duration: <em>{{length}}</em></p><p>Created time: <em>{{created_time}}</em></p><p id="bit_link"></p>{{embed}}</div><div class="col-md-6"><h5>Preview (Click thumbnail to play)</h5><div class="thumbnail"><div id="embed-preview" class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="https://www.facebook.com/video/embed?video_id={{vid}}" allowfullscreen></iframe></div></div></div></div>';r({url:"https://graph.facebook.com/fql?q=select vid, created_time, title, thumbnail_link, src_hq, src , embed_html, length from video where vid="+n,cache:!1,success:function(i){var r=i.data[0];return"undefined"==typeof r.vid?_f("Error!","error"):(_f("Done!!","success"),ga("send","event",{eventCategory:"Facebook",eventAction:"Download",eventLabel:n,eventValue:n}),r.length=_fs(r.length),r.created_time=_ct(r.created_time),r.embed=_e({vid:r.vid}),_i("result_container").innerHTML=e.up(s,r),r=i=null,t=n,void bitLink(n))},error:function(){_f("Error!!!","error")}})}},this._e=function(t){if(t.vid){var i={width:640,ratio:"16:9"},n=extend({},i,t),r='<div class="form-group"><label for="embed_code_rs">Embed code</label><textarea class="form-control" id="_ehc" onclick="_s(\'_ehc\');" rows="2" readonly>{{f_m}}</textarea></div><div id="custom_embed_btn" onclick="_t(\'custom_embed_tog\', \'toggle\');">Custom embed size <span class="caret"></span></div><div id="custom_embed_tog" class="toggle"><div class="video-embed"><form class="form-horizontal" id="e_f" name="e_f" method="get" action="" onsubmit="return false;"><div class="form-group radio_buttons"><label class="radio_buttons optional col-sm-3 control-label">Aspect Ratio</label><div class="col-sm-9"><label class="radio-inline"><input class="radio_buttons optional" id="video_ratio169" name="v_r" onclick="_k()" type="radio" {{if ratio|equals>16:9}}checked="checked"{{/if}} value="16:9">16:9</label><label class="radio-inline"><input class="radio_buttons optional" id="video_ratio43" name="v_r" onclick="_k()" type="radio" {{if ratio|equals>4:3}}checked="checked"{{/if}} value="4:3">4:3</label></div></div><div class="form-group"><label class="col-sm-3 control-label" for="_ew">Width</label><div class="col-sm-3"><input class="string form-control" id="_ew" name="_ew" value="{{width}}" placeholder="Width" onkeyup="_k();" type="number"></div></div><div class="form-group"><label class="col-sm-3 control-label" for="embed_height">Height</label><div class="col-sm-3"><input class="string  form-control" id="embed_height" readonly name="embed_height" value="{{height}}" placeholder="Height" type="number"></div></div></form></div></div>';return n.height=_v(n.width,n.ratio),n.f_m=f_m(n.vid,n.width,n.height),e.up(r,n)}},this._v=function(e,t){var i=null;return e*=1,"16:9"==t?i=Math.round(9*(e/16)):"4:3"==t&&(i=Math.round(3*(e/4))),i},this.f_m=function(e,t,i){return'<iframe src="https://www.facebook.com/video/embed?video_id='+e+'" width="'+t+'" height="'+i+'" frameborder="0"></iframe>'},this._k=function(){var e=_i("_ew").value,i="embed-preview",n=_u(document.forms.e_f.elements.v_r),r=_v(e,n);_i("embed_height").value=r,_i("_ehc").innerHTML=f_m(t,e,r),"16:9"==n?(_r(i,"embed-responsive-4by3"),_l(i,"embed-responsive-16by9")):(_r(i,"embed-responsive-16by9"),_l(i,"embed-responsive-4by3"))},this._fdf=function(){var e=_i("_vl"),t=e.value;return""!==t.trim()?_gfv(t):void _f("Hi!","hi")},this._fgc=function(){var e=_i("_vl"),t=e.value,i=_fi(t);if(!i)return void _f("Error!!!","error");var n='<div class="row"><div class="col-md-6">'+_e({vid:i})+'</div><div class="col-md-6"><h5>Preview (Click thumbnail to play)</h5><div class="thumbnail"><div id="embed-preview" class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="https://www.facebook.com/video/embed?video_id='+i+'" allowfullscreen></iframe></div></div></div></div>';_i("result_container").innerHTML=n,_f("Done!!","success"),ga("send","event",{eventCategory:"Facebook",eventAction:"Embed",eventLabel:i,eventValue:i})},this._s=function(e){_i(e).focus(),_i(e).select()},this._t=function(e,t){var i=_i(e),n=" "+i.className.replace(/[\t\r\n]/g," ")+" ";if(_hc(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");i.className=n.replace(/^\s+|\s+$/g,"")}else i.className+=" "+t},this._hc=function(e,t){var i=_i(e);return i.classList?i.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(i.className)},this._l=function(e,t){var i=_i(e);_hc(e,t)||(i.classList?i.classList.add(t):i.className+=" "+t)},this._r=function(e,t){var i=_i(e);_hc(e,t)&&(i.classList?i.classList.remove(t):i.className=i.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))},this._i=function(e){return document.getElementById(e)},this.ready=function(e){"loading"!=document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!=document.readyState&&e()})},this.gfHash=function(){var e=window.location.hash;if(e){e=e.split("#g!");var t=e&&e[1]?decodeURIComponent(e[1]):!1;if(_fi(t))return _i("_vl").value=t,_gfv(t)}},this.bitLink=function(e){var i=e?e:t,n="bit_link",s=encodeURIComponent("http://getfb.net/#g!https://www.facebook.com/video.php?v="+i);r({url:"http://api.bitly.com/v3/shorten?format=json&apiKey=R_03725ad0e6404d5ea891de9e2827b1fb&login=getfb&longUrl="+s,cache:!1,success:function(e){200==e.status_code&&"OK"==e.status_txt&&(_i(n).innerHTML='Share link: <a target="_blank" href="http://j.mp/'+e.data.hash+'">http://j.mp/'+e.data.hash+"</a>")},error:function(){}})}}();